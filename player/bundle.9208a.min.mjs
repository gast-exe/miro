(self.webpackChunkmyrotvorets_fm=self.webpackChunkmyrotvorets_fm||[]).push([[296],{55:function(e,t,n){function o(e){const t=Math.floor(e/60),n=Math.floor(e-60*t);return`${t}:${n<10?"0":""}${n}`}function r(e,t){try{window.localStorage.setItem(e,t)}catch(e){}}function i({artist:e,title:t}){return C("div",{className:"meta-container"},e||t?C("span",null,C("strong",null,e)," — ",t):null)}function a(){return P("div",{className:"Loader"})}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}function s(e){return L("input",l({type:"range",className:"Range"},e))}function u({onClick:e,muted:t}){return I("button",{className:t?"MuteButton muted":"MuteButton","aria-label":t?"Увімкнути звук":"Вимкнути звук",onClick:e},I("svg",{viewBox:"0 0 47 47"},I("path",{d:"M14 18v12h8l10 10V8L22 18h-8"})))}function d({disabled:e,onClick:t}){return E("button",{"aria-label":"Тихіше",disabled:e,onClick:t},E("svg",{viewBox:"0 0 47 47"},E("path",{d:"M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06m-27-6v12h8l10 10V8L18 18h-8"})))}function _({disabled:e,onClick:t}){return H("button",{"aria-label":"Гучніше",disabled:e,onClick:t},H("svg",{viewBox:"0 0 47 47"},H("path",{d:"M6 18v12h8l10 10V8L14 18H6m27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06M28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46"})))}function c({disabled:e,onClick:t}){return B("button",{disabled:e,"aria-label":"Стоп",onClick:t},B("svg",{viewBox:"0 0 47 47"},B("path",{d:"M12 12h24v24H12"})))}function h({onClick:e}){return M("button",{"aria-label":"Пауза",onClick:e},M("svg",{viewBox:"0 0 47 47"},M("path",{d:"M12 38h8V10h-8v28m16-28v28h8V10h-8"})))}function p({disabled:e,onClick:t}){return O("button",{disabled:e,"aria-label":"Відтворення",onClick:t},O("svg",{viewBox:"0 0 47 47"},O("path",{d:"M16 10v28l22-14"})))}function f({onClick:e,repeat:t}){return R("button",{className:t?"RepeatButton repeat":"RepeatButton","aria-label":t?"Не повторювати список":"Закільцювати список",onClick:e},R("svg",{viewBox:"0 0 47 47"},R("path",{d:"M14 14h20v6l8-8-8-8v6H10v12h4v-8m20 20H14v-6l-8 8 8 8v-6h24V26h-4v8"})))}function v({onClick:e,shuffle:t}){return F("button",{className:t?"ShuffleButton shuffle":"ShuffleButton","aria-label":t?"Випадковий порядок відтворення":"Послідовний порядок відтворення",onClick:e},F("svg",{viewBox:"0 0 47 47"},F("path",{d:"M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83M29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29m.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26"})))}function m({disabled:e,onClick:t}){return N("button",{"aria-label":"Попередня",disabled:e,onClick:t},N("svg",{viewBox:"0 0 47 47"},N("path",{d:"M12 12h4v24h-4zm7 12l17 12V12"})))}function y({disabled:e,onClick:t}){return V("button",{"aria-label":"Наступна",disabled:e,onClick:t},V("svg",{viewBox:"0 0 47 47"},V("path",{d:"M12 36l17-12-17-12v24m20-24v24h4V12h-4"})))}function g({text:e,filter:t}){if(!t.length)return D(x.HY,null,e);const n=new RegExp(`(${t.replace(/[\$\(-\+\x2D-\/\?\[-\^\{-\}]/g,"\\$&")})`,"iu"),o=e.split(n);return D(x.HY,null,o.map(((e,t)=>n.test(e)?D("mark",{key:t},e):D(x.HY,{key:t},e))))}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b.apply(this,arguments)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t.indexOf(n=i[o])>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t.indexOf(n=i[o])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var x=n(400),T=n(551),C=n(400).h,P=n(400).h,L=n(400).h,I=n(400).h,E=n(400).h,H=n(400).h,B=n(400).h,M=n(400).h,O=n(400).h,R=n(400).h,F=n(400).h,N=n(400).h,V=n(400).h,U=n(400).h;class $ extends x.wA{constructor(...e){super(...e),this.state={progress:0,time:"00:00",duration:"00:00",state:"paused",muted:!1,unlocked:!1,loading:!1},this._order=[],this._howl=void 0,this._onPlayClicked=()=>{const{current:e,playlist:t}=this.props,{unlocked:n}=this.state,o=t[e];if(!o)return;const r={loading:!0};this._howl&&this._howl.stop().unload(),this._howl=this._createHowl(o.url),n||(T.Howler.volume(this.props.volume),r.unlocked=!0),this.setState(r),this._howl.play()},this._onPauseClicked=()=>{var e;null==(e=this._howl)||e.pause()},this._onStopClicked=()=>{var e;null==(e=this._howl)||e.stop()},this._onPrevClicked=()=>{const{current:e,onSongChanged:t,playlist:n,repeat:o}=this.props,r=this._order.indexOf(e);if(r>0||o){null==t||t(this._order[r-1>=0?r-1:n.length-1])}},this._onNextClicked=()=>{const{current:e,onSongChanged:t,playlist:n,repeat:o}=this.props,r=this._order.indexOf(e);if(r<n.length||o){null==t||t(this._order[r+1>=n.length?0:r+1])}},this._onMuteClicked=()=>this.setState((({muted:e})=>({muted:!e}))),this._onVolumeDownClicked=()=>{var e,t;return null==(e=(t=this.props).onVolumeChanged)?void 0:e.call(t,this.props.volume<.05?0:this.props.volume-.05)},this._onVolumeUpClicked=()=>{var e,t;return null==(e=(t=this.props).onVolumeChanged)?void 0:e.call(t,this.props.volume>.95?1:this.props.volume+.05)},this._onRepeatListClicked=()=>{var e,t;return null==(e=(t=this.props).onRepeatChanged)?void 0:e.call(t,!this.props.repeat)},this._onShuffleListClicked=()=>{var e,t;return null==(e=(t=this.props).onShuffleChanged)?void 0:e.call(t,!this.props.shuffle)},this._onVolumeChanged=({currentTarget:e})=>{var t,n;const{valueAsNumber:o}=e;null==(t=(n=this.props).onVolumeChanged)||t.call(n,o/100)},this._onPositionChanged=({currentTarget:e})=>{const{valueAsNumber:t}=e;this._howl&&this._howl.playing()&&this._howl.seek(this._howl.duration()*t/100)},this._onPauseHandler=()=>this.setState({state:"paused"}),this._onPlayHandler=()=>{this.setState({state:"playing",loading:!1}),requestAnimationFrame(this._step)},this._onStopHandler=()=>this.setState({state:"paused",time:o(0)}),this._onSeekHandler=()=>requestAnimationFrame(this._step),this._onErrorHandler=(e,t)=>{var n,o;this.setState({loading:!1,state:"paused"}),null==(n=(o=this.props).onError)||n.call(o,t)},this._step=()=>{if(this._howl){const e=+this._howl.seek()||0,t=this._howl.duration();this.setState({progress:t?Math.round(e/t*1e3)/10:0,time:o(e),duration:o(t)}),this._howl.playing()&&requestAnimationFrame(this._step)}}}static getDerivedStateFromProps(e,t){const n={};return e.unlocked===t.unlocked||t.unlocked||(n.unlocked=e.unlocked),Object.keys(n).length?n:null}componentDidUpdate(e,t){var n;(e.volume!==this.props.volume&&T.Howler.volume(this.props.volume),t.muted!==this.state.muted&&T.Howler.mute(this.state.muted),e.current!==this.props.current)&&(null==(n=this._howl)||n.stop().unload(),this._advance());e.shuffle===this.props.shuffle&&e.playlist.length===this.props.playlist.length||this._makeOrder(),t.unlocked!==this.state.unlocked&&this.state.unlocked&&this._onPlayClicked()}_createHowl(e){return new T.Howl({src:e,html5:!0,autoplay:!1,onplay:this._onPlayHandler,onpause:this._onPauseHandler,onstop:this._onStopHandler,onseek:this._onSeekHandler,onend:this._onNextClicked,onloaderror:this._onErrorHandler,onplayerror:this._onErrorHandler})}_advance(){var e;const{unlocked:t}=this.state;this.setState({progress:0,time:o(0),duration:o((null==(e=this._howl)?void 0:e.duration())||0)}),t&&this._onPlayClicked()}_makeOrder(){const{playlist:e,shuffle:t}=this.props,n=[];let o=e.length;for(let e=0;e<o;++e)n.push(e);if(t)for(;o>0;){const e=Math.floor(Math.random()*o);--o;const t=n[o];n[o]=n[e],n[e]=t}this._order=n}render(){var e;const{current:t,playlist:n,repeat:o,shuffle:r,volume:l}=this.props,{duration:g,loading:b,muted:w,progress:k,state:S,time:A}=this.state,T=n[t],C=this._order.indexOf(t);return U("div",{className:"Player",role:"main","aria-label":"Аудіоплеєр"},U("div",{className:"volume-container"},U(u,{muted:w,onClick:this._onMuteClicked}),U(d,{disabled:l<=0,onClick:this._onVolumeDownClicked}),U(_,{disabled:l>=1,onClick:this._onVolumeUpClicked}),U("div",{className:"volume"},U("div",{className:"volume-bar",style:{backgroundSize:Math.round(1e3*l)/10+"% 100%"},title:`Гучність: ${Math.round(100*l)}%`}),U(s,{"aria-label":"Регулятор гучності",value:100*l,onInput:this._onVolumeChanged}))),U("div",{className:"progress-container"},U("div",{className:"progress"},U("div",{className:"progress-bar",style:{backgroundSize:`${k}% 100%`}}),U(s,{step:.1,value:k,"aria-label":"Прогрес відтворення",disabled:!(null!=(e=this._howl)&&e.playing),onInput:this._onPositionChanged})),U("div",{className:"time-container"},b?U(a,null):U(x.HY,null,A," / ",g))),U(i,{artist:null==T?void 0:T.artist,title:null==T?void 0:T.title}),U("div",{className:"control-container"},U(m,{disabled:!n.length||C<=0&&!o,onClick:this._onPrevClicked}),T&&"paused"!==S?U(h,{onClick:this._onPauseClicked}):U(p,{disabled:!T,onClick:this._onPlayClicked}),U(c,{disabled:!T,onClick:this._onStopClicked}),U(y,{disabled:C>=n.length-1&&!o,onClick:this._onNextClicked}),U(v,{shuffle:r,onClick:this._onShuffleListClicked}),U(f,{repeat:o,onClick:this._onRepeatListClicked})))}}var D=n(400).h,j=n(400).h;const W=["container","items","rowHeight","renderItem","overscan","initialState"],G={position:"relative",overflow:"hidden",width:"100%",minHeight:"100%"},q={position:"absolute",left:0,height:"100%",width:"100%",overflow:"visible"};class z extends x.wA{constructor(){super(),this._firstRender=!0,this.state={height:0,offset:0},this._onResizeHandler=()=>{const e=this.base;this.state.height!==e.offsetHeight&&this.setState({height:e.offsetHeight})},this._onScrollHandler=()=>{this.setState({offset:this.base.scrollTop})},this._onResizeHandler=function(e){let t=!1;return function(...n){t||(t=!0,window.requestAnimationFrame((()=>{e.apply(this,n),t=!1})))}}(this._onResizeHandler)}componentDidMount(){this._onResizeHandler(),window.addEventListener("resize",this._onResizeHandler)}componentDidUpdate(){this._onResizeHandler()}componentWillUnmount(){window.removeEventListener("resize",this._onResizeHandler)}scrollTo(e){const{rowHeight:t}=this.props,{offset:n,height:o}=this.state,r=Math.floor(n/t||0),i=Math.floor(o/t||0);if(e>=r&&e<r+i)return;const a=Math.floor(i/2),l=Math.max(0,(e-a)*t);this.base.scrollTop=l}render(){const e=this.props,{container:t,items:n,rowHeight:o,renderItem:r,overscan:i,initialState:a}=e,l=A(e,W),{offset:s,height:u}=this.state;let d,_;if(this._firstRender&&a){this._firstRender=!1,_=a.firstIndex;let e=a.lastIndex;i&&(_=Math.max(0,_-_%i),e+=i),d=n.slice(_,e)}else{_=s/o||0;let e=u/o||0;i&&(_=Math.max(0,_-_%i),e+=i);d=n.slice(_,_+1+e)}const c=null!=t?t:"div";return j("div",b({onScroll:this._onScrollHandler},l),j("div",{style:k(k({},G),{},{height:n.length*o})},j(c,{style:k(k({},q),{},{top:_*o})},d.map(r))))}}var Q=n(400).h;const Y="https://cdn.myrotvorets.center/m/mp3/",X=`${Y}playlist.txt?utm_source=myrfm`;class Z extends x.wA{constructor(...e){super(...e),this.state={playlist:void 0,filtered:[],filter:""},this._listRef=(0,x.Vf)(),this._filterList=function(e,t){let n;return function(...o){window.clearTimeout(n),n=window.setTimeout((()=>{e.apply(this,o)}),t)}}((e=>{const{playlist:t}=this.state;if(e.length>=2){const n=t.filter(this.filterPlaylist,e);this.setState({filter:e,filtered:n})}else this.setState({filtered:t||[],filter:e})}),250),this._onEntryClicked=e=>{const{onSongClicked:t}=this.props;if(void 0!==t&&e.target){const n=e.target.closest("[data-id]");if(n){t(parseInt(n.dataset.id||"",10))}}},this._onFilterChanged=e=>{this._filterList(e.currentTarget.value)},this._renderPlaylistEntry=({id:e,artist:t,title:n})=>{const{active:o}=this.props,{filter:r}=this.state;return r.length>=2?Q("li",{key:e,"data-id":e,className:o===e?"active item":"item"},Q("strong",null,e+1,". ",Q(g,{text:t,filter:r}))," ","— ",Q(g,{text:n,filter:r})):Q("li",{key:e,"data-id":e,className:o===e?"active item":"item"},Q("strong",null,e+1,". ",t)," ","— ",n)}}async componentDidMount(){try{const e=await fetch(X);if(e.ok){const t=await e.text();this.parsePlaylist(t)}else this._onPlaylistfetchError()}catch(e){this._onPlaylistfetchError()}}componentDidUpdate(e,t){var n,o;if(e.active!==this.props.active||(null==(n=t.playlist)?void 0:n.length)!==(null==(o=this.state.playlist)?void 0:o.length)){var r;const e=this.state.filtered.findIndex((e=>e.id===this.props.active));null==(r=this._listRef.current)||r.scrollTo(e)}}_onPlaylistfetchError(){var e,t;this.setState({playlist:null}),null==(e=(t=this.props).onPlaylistLoaded)||e.call(t,null)}parsePlaylist(e){var t,n;const o=e.replace(/^\uFEFF/,"").replace(/\r/g,"").split("\n");let r=0;const i=o.map((e=>{const t=e.split("\t");return 3===t.length?{id:r++,artist:t[0].replace(/^_/,""),title:t[1],url:`${Y}${t[2]}`}:(console.warn("Unable to parse playlist entry:",e),null)})).filter(Boolean);this.setState({playlist:i,filtered:i}),null==(t=(n=this.props).onPlaylistLoaded)||t.call(n,i)}filterPlaylist({artist:e,title:t}){const n=this.toLocaleLowerCase();return-1!==e.toLocaleLowerCase().indexOf(n)||-1!==t.toLocaleLowerCase().indexOf(n)}render(){const{filter:e,filtered:t,playlist:n}=this.state;return void 0===n?Q("div",{className:"playlist"},Q("p",null,"Завантаження списку відтворення…")):null===n?Q("div",{className:"playlist"},Q("p",null,"Під час завантаження списку відтворення сталася помилка. Будь-ласка, спробуйте пізніше.")):n.length?Q("div",{className:"playlist",role:"main","aria-label":"Список відтворення"},Q("input",{type:"search",value:e,onInput:this._onFilterChanged,placeholder:"Шукати…","aria-label":"Пошук"}),t.length?Q(z,{items:t,overscan:10,rowHeight:41,renderItem:this._renderPlaylistEntry,className:"items",onClick:this._onEntryClicked,ref:this._listRef,container:"ul"}):Q("p",null,Q("strong",null,"Нічого не знайдено"," ",Q("span",{role:"img","aria-label":"на жаль"},"😢")))):Q("div",{className:"playlist"},Q("p",null,"Список відтворення порожній. Будь-ласка, спробуйте пізніше."))}}var K=n(400).h;class J extends x.wA{constructor(e){var t,n,o,r;super(e),this.state={playlist:null,active:-1,volume:1,repeat:!0,shuffle:!1,unlocked:!1},this._onPopStateHandler=()=>{const e=new URL(location.href);e.searchParams.has("songid")&&this.setState({active:parseInt(e.searchParams.get("songid"),10)-1})},this._onPlaylistLoaded=e=>this.setState({playlist:e}),this._onSongClicked=e=>this.setState({active:e,unlocked:!0}),this._onSongChanged=e=>this.setState({active:e}),this._onShuffleChanged=e=>this.setState({shuffle:e}),this._onRepeatChanged=e=>this.setState({repeat:e}),this._onVolumeChanged=e=>this.setState({volume:e}),this._onError=e=>console.error(e),this.state.repeat=!(null!=(t=window.localStorage.getItem("repeat"))&&!t),this.state.shuffle=!(null==(n=window.localStorage.getItem("shuffle"))||!n),this.state.volume=parseFloat(null!=(o=window.localStorage.getItem("volume"))?o:"1")||1,this.state.active=parseInt(null!=(r=window.localStorage.getItem("active"))?r:"0",10)||0,(this.state.volume<0||this.state.volume>1)&&(this.state.volume=1);const i=new URL(self.location.href);i.searchParams.has("songid")?this.state.active=parseInt(i.searchParams.get("songid"),10)-1||0:(this._updateTitle(),this._updateURL(!0))}componentDidMount(){self.addEventListener("popstate",this._onPopStateHandler)}componentDidUpdate(e,t){t.active!==this.state.active&&(this._updateTitle(),r("active",`${this.state.active}`),this._updateURL(!1)),t.volume!==this.state.volume&&r("volume",`${this.state.volume}`),t.repeat!==this.state.repeat&&r("repeat",this.state.repeat?"1":""),t.shuffle!==this.state.shuffle&&r("shuffle",this.state.shuffle?"1":"")}componentWillUnmount(){self.removeEventListener("popstate",this._onPopStateHandler)}_updateTitle(){const{active:e,playlist:t}=this.state;if(t&&t[e]){const{artist:n,title:o}=t[e];document.title=`${n?`${n} — `:""}${o} — Myrotvorets.FM`}else document.title="Myrotvorets.FM"}_updateURL(e){const t=new URL(self.location.href);t.searchParams.get("songid")!==`${this.state.active+1}`&&(t.searchParams.set("songid",`${this.state.active+1}`),e?self.history.replaceState(null,document.title,t.href):self.history.pushState(null,document.title,t.href))}render(){const{active:e,playlist:t,repeat:n,shuffle:o,volume:r,unlocked:i}=this.state;return K(x.HY,null,K($,{playlist:t||[],error:null===t,current:e,volume:r,repeat:n,shuffle:o,unlocked:i,onError:this._onError,onSongChanged:this._onSongChanged,onRepeatChanged:this._onRepeatChanged,onShuffleChanged:this._onShuffleChanged,onVolumeChanged:this._onVolumeChanged}),K(Z,{active:e,onPlaylistLoaded:this._onPlaylistLoaded,onSongClicked:this._onSongClicked}))}}var ee=n(400).h;{const{body:e}=document,t=document.getElementById("app")||void 0;(0,x.sY)(ee((function(){return ee(J,null)}),null),e,t),t&&e.removeChild(t),"serviceWorker"in navigator&&!/^(127|192\.168|10)\./.test(window.location.hostname)&&navigator.serviceWorker.register("sw.js").then((e=>e.addEventListener("updatefound",(()=>{const t=e.installing;t&&t.addEventListener("statechange",(()=>{"installed"===t.state&&navigator.serviceWorker.controller&&e.update().catch((()=>{}))}))})))).catch((()=>{})),document.getElementById("version").addEventListener("click",(()=>{self.caches?self.caches.keys().then((e=>Promise.all(e.map((e=>self.caches.delete(e)))))).then((()=>("serviceWorker"in navigator?navigator.serviceWorker.getRegistration().then((e=>(e?e.unregister().then((()=>self.location.reload())).catch((e=>console.error(e))):self.location.reload(),null))).catch((e=>{console.error(e),self.location.reload()})):self.location.reload(),null))).catch((e=>{console.error(e),self.location.reload()})):self.location.reload()}))}},551:function(e,t){var n;!function(){var o=function(){this.init()};o.prototype={init:function(){var e=this||r;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||r;if(e=parseFloat(e),t.ctx||c(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,r.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),i=0;i<o.length;i++){var a=t._howls[n]._soundById(o[i]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||r;t.ctx||c(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,r.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),i=0;i<o.length;i++){var a=t._howls[n]._soundById(o[i]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||r,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||r,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,c()),e},codecs:function(e){return(this||r)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||r;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||r,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),o=e._navigator?e._navigator.userAgent:"",i=o.match(/OPR\/([0-6].)/g),a=i&&parseInt(i[0].split("/")[1],10)<33,l=-1!==o.indexOf("Safari")&&-1===o.indexOf("Chrome"),s=o.match(/Version\/(.*?) /),u=l&&s&&parseInt(s[1],10)<15;return e._codecs={mp3:!(a||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||r;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,e._releaseHtml5Audio(n)}catch(t){e.noAudio=!0;break}for(var o=0;o<e._howls.length;o++)if(!e._howls[o]._webAudio)for(var r=e._howls[o]._getSoundIds(),i=0;i<r.length;i++){var a=e._howls[o]._soundById(r[i]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||r;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||r;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&r.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&r.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var r=new o,i=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(e){var t=this;return r.ctx||c(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=r.usingWebAudio&&!t._html5,void 0!==r.ctx&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(r.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var o,i;if(e._format&&e._format[n])o=e._format[n];else{if("string"!=typeof(i=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(o=/^data:audio\/([^;,]+);/i.exec(i))||(o=/\.([^.]+)$/.exec(i.split("?",1)[0])),o&&(o=o[1].toLowerCase())}if(o||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),o&&r.codecs(o)){t=e._src[n];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&s(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var i=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(i++,o=n._sounds[a]._id);1===i?e=null:o=null}}var l=o?n._soundById(o):n._inactiveSound();if(!l)return null;if(o&&!e&&(e=l._sprite||"__default"),"loaded"!==n._state){l._sprite=e,l._ended=!1;var s=l._id;return n._queue.push({event:"play",action:function(){n.play(s)}}),s}if(o&&!l._paused)return t||n._loadQueue("play"),l._id;n._webAudio&&r._autoResume();var u=Math.max(0,l._seek>0?l._seek:n._sprite[e][0]/1e3),d=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),_=1e3*d/Math.abs(l._rate),c=n._sprite[e][0]/1e3,h=(n._sprite[e][0]+n._sprite[e][1])/1e3;l._sprite=e,l._ended=!1;var p=function(){l._paused=!1,l._seek=u,l._start=c,l._stop=h,l._loop=!(!l._loop&&!n._sprite[e][2])};if(!(u>=h)){var f=l._node;if(n._webAudio){var v=function(){n._playLock=!1,p(),n._refreshBuffer(l),f.gain.setValueAtTime(l._muted||n._muted?0:l._volume,r.ctx.currentTime),l._playStart=r.ctx.currentTime,void 0===f.bufferSource.start?f.bufferSource.noteGrainOn(0,u,l._loop?86400:d):f.bufferSource.start(0,u,l._loop?86400:d),_!==1/0&&(n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),_)),t||setTimeout((function(){n._emit("play",l._id),n._loadQueue()}),0)};"running"===r.state&&"interrupted"!==r.ctx.state?v():(n._playLock=!0,n.once("resume",v),n._clearTimer(l._id))}else{var m=function(){f.currentTime=u,f.muted=l._muted||n._muted||r._muted||f.muted,f.volume=l._volume*r.volume(),f.playbackRate=l._rate;try{var o=f.play();if(o&&"undefined"!=typeof Promise&&(o instanceof Promise||"function"==typeof o.then)?(n._playLock=!0,p(),o.then((function(){n._playLock=!1,f._unlocked=!0,t?n._loadQueue():n._emit("play",l._id)})).catch((function(){n._playLock=!1,n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l._ended=!0,l._paused=!0}))):t||(n._playLock=!1,p(),n._emit("play",l._id)),f.playbackRate=l._rate,f.paused)return void n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||l._loop?n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),_):(n._endTimers[l._id]=function(){n._ended(l),f.removeEventListener("ended",n._endTimers[l._id],!1)},f.addEventListener("ended",n._endTimers[l._id],!1))}catch(e){n._emit("playerror",l._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===f.src&&(f.src=n._src,f.load());var y=window&&window.ejecta||!f.readyState&&r._navigator.isCocoonJS;if(f.readyState>=3||y)m();else{n._playLock=!0,n._state="loading";var g=function(){n._state="loaded",m(),f.removeEventListener(r._canPlayEvent,g,!1)};f.addEventListener(r._canPlayEvent,g,!1),n._clearTimer(l._id)}}return l._id}n._ended(l)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o]);var r=t._soundById(n[o]);if(r&&!r._paused&&(r._seek=t.seek(n[o]),r._rateSeek=0,r._paused=!0,t._stopFade(n[o]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var o=n._getSoundIds(e),r=0;r<o.length;r++){n._clearTimer(o[r]);var i=n._soundById(o[r]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(o[r]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),t||n._emit("stop",i._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var o=n._getSoundIds(t),i=0;i<o.length;i++){var a=n._soundById(o[i]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,r.ctx.currentTime):a._node&&(a._node.muted=!!r._muted||e),n._emit("mute",a._id))}return n},volume:function(){var e,t,n,o=this,i=arguments;if(0===i.length)return o._volume;if(1===i.length||2===i.length&&void 0===i[1]?o._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0]):i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10)),!(void 0!==e&&e>=0&&e<=1))return(n=t?o._soundById(t):o._sounds[0])?n._volume:0;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,i)}}),o;void 0===t&&(o._volume=e),t=o._getSoundIds(t);for(var a=0;a<t.length;a++)(n=o._soundById(t[a]))&&(n._volume=e,i[2]||o._stopFade(t[a]),o._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,r.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*r.volume()),o._emit("volume",n._id));return o},fade:function(e,t,n,o){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,n,o)}}),i;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),i.volume(e,o);for(var a=i._getSoundIds(o),l=0;l<a.length;l++){var s=i._soundById(a[l]);if(s){if(o||i._stopFade(a[l]),i._webAudio&&!s._muted){var u=r.ctx.currentTime,d=u+n/1e3;s._volume=e,s._node.gain.setValueAtTime(e,u),s._node.gain.linearRampToValueAtTime(t,d)}i._startFadeInterval(s,e,t,n,a[l],void 0===o)}}return i},_startFadeInterval:function(e,t,n,o,r,i){var a=this,l=t,s=n-t,u=Math.abs(s/.01),d=Math.max(4,u>0?o/u:o),_=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var r=(Date.now()-_)/o;_=Date.now(),l+=s*r,l=Math.round(100*l)/100,l=s<0?Math.max(n,l):Math.min(n,l),a._webAudio?e._volume=l:a.volume(l,e._id,!0),i&&(a._volume=l),(n<t&&l<=n||n>t&&l>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))}),d)},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(n._interval),n._interval=null,t.volume(n._fadeTo,e),n._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,o=this,r=arguments;if(0===r.length)return o._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=o._soundById(parseInt(r[0],10)))&&n._loop;o._loop=e=r[0]}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i=o._getSoundIds(t),a=0;a<i.length;a++)(n=o._soundById(i[a]))&&(n._loop=e,o._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,o.playing(i[a])&&(o.pause(i[a],!0),o.play(i[a],!0)))));return o},rate:function(){var e,t,n,o=this,i=arguments;if(0===i.length)t=o._sounds[0]._id;else if(1===i.length){o._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(n=o._soundById(t))?n._rate:o._rate;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,i)}}),o;void 0===t&&(o._rate=e),t=o._getSoundIds(t);for(var a=0;a<t.length;a++)if(n=o._soundById(t[a])){o.playing(t[a])&&(n._rateSeek=o.seek(t[a]),n._playStart=o._webAudio?r.ctx.currentTime:n._playStart),n._rate=e,o._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,r.ctx.currentTime):n._node&&(n._node.playbackRate=e);var l=o.seek(t[a]),s=1e3*((o._sprite[n._sprite][0]+o._sprite[n._sprite][1])/1e3-l)/Math.abs(n._rate);!o._endTimers[t[a]]&&n._paused||(o._clearTimer(t[a]),o._endTimers[t[a]]=setTimeout(o._ended.bind(o,n),s)),o._emit("rate",n._id)}return o},seek:function(){var e,t,n=this,o=arguments;if(0===o.length)n._sounds.length&&(t=n._sounds[0]._id);else if(1===o.length){n._getSoundIds().indexOf(o[0])>=0?t=parseInt(o[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(o[0]))}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if(void 0===t)return 0;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,o)}}),n;var i=n._soundById(t);if(i){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var a=n.playing(t)?r.ctx.currentTime-i._playStart:0;return i._seek+((i._rateSeek?i._rateSeek-i._seek:0)+a*Math.abs(i._rate))}return i._node.currentTime}var l=n.playing(t);l&&n.pause(t,!0),i._seek=e,i._ended=!1,n._clearTimer(t),n._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=e);var s=function(){l&&n.play(t,!0),n._emit("seek",t)};if(l&&!n._webAudio){var u=function(){n._playLock?setTimeout(u,0):s()};setTimeout(u,0)}else s()}return n},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var o=0;o<t._sounds.length;o++)if(!t._sounds[o]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,o=t._soundById(e);return o&&(n=t._sprite[o._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(r._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),r._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var o=r._howls.indexOf(e);o>=0&&r._howls.splice(o,1);var i=!0;for(n=0;n<r._howls.length;n++)if(r._howls[n]._src===e._src||e._src.indexOf(r._howls[n]._src)>=0){i=!1;break}return l&&i&&delete l[e._src],r.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,o){return"function"==typeof t&&this["_on"+e].push(o?{id:n,fn:t,once:o}:{id:n,fn:t}),this},off:function(e,t,n){var o=this,r=o["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<r.length;i++){var a=n===r[i].id;if(t===r[i].fn&&a||!t&&a){r.splice(i,1);break}}else if(e)o["_on"+e]=[];else{var l=Object.keys(o);for(i=0;i<l.length;i++)0===l[i].indexOf("_on")&&Array.isArray(o[l[i]])&&(o[l[i]]=[])}return o},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var o=this,r=o["_on"+e],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(o,r[i].fn),0),r[i].once&&o.off(e,r[i].fn,r[i].id));return o._loadQueue(e),o},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var o=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&o&&t.stop(e._id,!0).play(e._id),t._webAudio&&o){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=r.ctx.currentTime;var i=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),i)}return t._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),r._autoSuspend()),t._webAudio||o||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new a(e)},_drain:function(){var e=this,t=e._pool,n=0,o=0;if(!(e._sounds.length<t)){for(o=0;o<e._sounds.length;o++)e._sounds[o]._ended&&n++;for(o=e._sounds.length-1;o>=0;o--){if(n<=t)return;e._sounds[o]._ended&&(e._webAudio&&e._sounds[o]._node&&e._sounds[o]._node.disconnect(0),e._sounds.splice(o,1),n--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=r.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._node.bufferSource.connect(e._panner?e._panner:e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,r.ctx.currentTime),this},_cleanBuffer:function(e){var t=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=r._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=r._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),e._node.gain.setValueAtTime(n,r.ctx.currentTime),e._node.paused=!0,e._node.connect(r.masterGain)):r.noAudio||(e._node=r._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(r._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=n*r.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(r._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var l={},s=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void _(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);d(o.buffer,e)}else{var i=new XMLHttpRequest;i.open(e._xhr.method,t,!0),i.withCredentials=e._xhr.withCredentials,i.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){i.setRequestHeader(t,e._xhr.headers[t])})),i.onload=function(){var t=(i.status+"")[0];"0"===t||"2"===t||"3"===t?d(i.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},u(i)}},u=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},o=function(e){e&&t._sounds.length>0?(l[t._src]=e,_(t,e)):n()};"undefined"!=typeof Promise&&1===r.ctx.decodeAudioData.length?r.ctx.decodeAudioData(e).then(o).catch(n):r.ctx.decodeAudioData(e,o,n)},_=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},c=function(){if(r.usingWebAudio){try{"undefined"!=typeof AudioContext?r.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(e){r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),t=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var o=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!o&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};void 0===(n=function(){return{Howler:r,Howl:i}}.apply(t,[]))||(e.exports=n),t.Howler=r,t.Howl=i,"undefined"!=typeof global?(global.HowlerGlobal=o,global.Howler=r,global.Howl=i,global.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=o,window.Howler=r,window.Howl=i,window.Sound=a)}()},400:function(e,t,n){function o(e,t){for(var n in t)e[n]=t[n];return e}function r(e){var t=e.parentNode;t&&t.removeChild(e)}function i(e,t,n){var o,r,i,l={};for(i in t)"key"==i?o=t[i]:"ref"==i?r=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?L.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===l[i]&&(l[i]=e.defaultProps[i]);return a(e,l,o,r,null)}function a(e,t,n,o,r){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++E:r};return null==r&&null!=I.vnode&&I.vnode(i),i}function l(){return{current:null}}function s(e){return e.children}function u(e,t){this.props=e,this.context=t}function d(e,t){if(null==t)return e.__?d(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?d(e):null}function _(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return _(e)}}function c(e){(!e.__d&&(e.__d=!0)&&H.push(e)&&!h.__r++||B!==I.debounceRendering)&&((B=I.debounceRendering)||M)(h)}function h(){var e,t,n,r,i,a,l,s;for(H.sort(O);e=H.shift();)e.__d&&(t=H.length,r=void 0,i=void 0,l=(a=(n=e).__v).__e,(s=n.__P)&&(r=[],(i=o({},a)).__v=a.__v+1,k(s,a,i,n.__n,void 0!==s.ownerSVGElement,null!=a.__h?[l]:null,r,null==l?d(a):l,a.__h),S(r,a),a.__e!=l&&_(a)),H.length>t&&H.sort(O));h.__r=0}function p(e,t,n,o,r,i,l,u,_,c){var h,p,y,g,b,w,S,A=o&&o.__k||F,C=A.length;for(n.__k=[],h=0;h<t.length;h++)if(null!=(g=n.__k[h]=null==(g=t[h])||"boolean"==typeof g||"function"==typeof g?null:"string"==typeof g||"number"==typeof g||"bigint"==typeof g?a(null,g,null,null,g):V(g)?a(s,{children:g},null,null,null):g.__b>0?a(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)){if(g.__=n,g.__b=n.__b+1,null===(y=A[h])||y&&g.key==y.key&&g.type===y.type)A[h]=void 0;else for(p=0;p<C;p++){if((y=A[p])&&g.key==y.key&&g.type===y.type){A[p]=void 0;break}y=null}k(e,g,y=y||R,r,i,l,u,_,c),b=g.__e,(p=g.ref)&&y.ref!=p&&(S||(S=[]),y.ref&&S.push(y.ref,null,g),S.push(p,g.__c||b,g)),null!=b?(null==w&&(w=b),"function"==typeof g.type&&g.__k===y.__k?g.__d=_=f(g,_,e):_=v(e,g,y,A,b,_),"function"==typeof n.type&&(n.__d=_)):_&&y.__e==_&&_.parentNode!=e&&(_=d(y))}for(n.__e=w,h=C;h--;)null!=A[h]&&("function"==typeof n.type&&null!=A[h].__e&&A[h].__e==n.__d&&(n.__d=m(o).nextSibling),T(A[h],A[h]));if(S)for(h=0;h<S.length;h++)x(S[h],S[++h],S[++h])}function f(e,t,n){for(var o,r=e.__k,i=0;r&&i<r.length;i++)(o=r[i])&&(o.__=e,t="function"==typeof o.type?f(o,t,n):v(n,o,o,r,o.__e,t));return t}function v(e,t,n,o,r,i){var a,l,s;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||r!=i||null==r.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(r),a=null;else{for(l=i,s=0;(l=l.nextSibling)&&s<o.length;s+=1)if(l==r)break e;e.insertBefore(r,i),a=i}return void 0!==a?a:r.nextSibling}function m(e){var t,n,o;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k)for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(o=m(n)))return o;return null}function y(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||N.test(t)?n:n+"px"}function g(e,t,n,o,r){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||y(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||y(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o||e.addEventListener(t,i?w:b,i):e.removeEventListener(t,i?w:b,i);else if("dangerouslySetInnerHTML"!==t){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function b(e){return this.l[e.type+!1](I.event?I.event(e):e)}function w(e){return this.l[e.type+!0](I.event?I.event(e):e)}function k(e,t,n,r,i,a,l,d,_){var c,h,f,v,m,y,g,b,w,k,S,x,T,P,L,E=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(_=n.__h,d=t.__e=n.__e,t.__h=null,a=[d]),(c=I.__b)&&c(t);try{e:if("function"==typeof E){if(b=t.props,w=(c=E.contextType)&&r[c.__c],k=c?w?w.props.value:c.__:r,n.__c?g=(h=t.__c=n.__c).__=h.__E:("prototype"in E&&E.prototype.render?t.__c=h=new E(b,k):(t.__c=h=new u(b,k),h.constructor=E,h.render=C),w&&w.sub(h),h.props=b,h.state||(h.state={}),h.context=k,h.__n=r,f=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=E.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=o({},h.__s)),o(h.__s,E.getDerivedStateFromProps(b,h.__s))),v=h.props,m=h.state,h.__v=t,f)null==E.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==E.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,k),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,k)||t.__v===n.__v){for(t.__v!==n.__v&&(h.props=b,h.state=h.__s,h.__d=!1),h.__e=!1,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),S=0;S<h._sb.length;S++)h.__h.push(h._sb[S]);h._sb=[],h.__h.length&&l.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,k),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(v,m,y)}))}if(h.context=k,h.props=b,h.__P=e,x=I.__r,T=0,"prototype"in E&&E.prototype.render){for(h.state=h.__s,h.__d=!1,x&&x(t),c=h.render(h.props,h.state,h.context),P=0;P<h._sb.length;P++)h.__h.push(h._sb[P]);h._sb=[]}else do{h.__d=!1,x&&x(t),c=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++T<25);h.state=h.__s,null!=h.getChildContext&&(r=o(o({},r),h.getChildContext())),f||null==h.getSnapshotBeforeUpdate||(y=h.getSnapshotBeforeUpdate(v,m)),p(e,V(L=null!=c&&c.type===s&&null==c.key?c.props.children:c)?L:[L],t,n,r,i,a,l,d,_),h.base=t.__e,t.__h=null,h.__h.length&&l.push(h),g&&(h.__E=h.__=null),h.__e=!1}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=A(n.__e,t,n,r,i,a,l,_);(c=I.diffed)&&c(t)}catch(e){t.__v=null,(_||null!=a)&&(t.__e=d,t.__h=!!_,a[a.indexOf(d)]=null),I.__e(e,t,n)}}function S(e,t){I.__c&&I.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){I.__e(e,t.__v)}}))}function A(e,t,n,o,i,a,l,s){var u,_,c,h=n.props,f=t.props,v=t.type,m=0;if("svg"===v&&(i=!0),null!=a)for(;m<a.length;m++)if((u=a[m])&&"setAttribute"in u==!!v&&(v?u.localName===v:3===u.nodeType)){e=u,a[m]=null;break}if(null==e){if(null===v)return document.createTextNode(f);e=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,f.is&&f),a=null,s=!1}if(null===v)h===f||s&&e.data===f||(e.data=f);else{if(a=a&&L.call(e.childNodes),_=(h=n.props||R).dangerouslySetInnerHTML,c=f.dangerouslySetInnerHTML,!s){if(null!=a)for(h={},m=0;m<e.attributes.length;m++)h[e.attributes[m].name]=e.attributes[m].value;(c||_)&&(c&&(_&&c.__html==_.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(function(e,t,n,o,r){var i;for(i in n)"children"===i||"key"===i||i in t||g(e,i,null,n[i],o);for(i in t)r&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||g(e,i,t[i],n[i],o)}(e,f,h,i,s),c)t.__k=[];else if(p(e,V(m=t.props.children)?m:[m],t,n,o,i&&"foreignObject"!==v,a,l,a?a[0]:n.__k&&d(n,0),s),null!=a)for(m=a.length;m--;)null!=a[m]&&r(a[m]);s||("value"in f&&void 0!==(m=f.value)&&(m!==e.value||"progress"===v&&!m||"option"===v&&m!==h.value)&&g(e,"value",m,h.value,!1),"checked"in f&&void 0!==(m=f.checked)&&m!==e.checked&&g(e,"checked",m,h.checked,!1))}return e}function x(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){I.__e(e,n)}}function T(e,t,n){var o,i;if(I.unmount&&I.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||x(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){I.__e(e,t)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&T(o[i],t,n||"function"!=typeof e.type);n||null==e.__e||r(e.__e),e.__=e.__e=e.__d=void 0}function C(e,t,n){return this.constructor(e,n)}function P(e,t,n){var o,r,a;I.__&&I.__(e,t),r=(o="function"==typeof n)?null:n&&n.__k||t.__k,a=[],k(t,e=(!o&&n||t).__k=i(s,null,[e]),r||R,R,void 0!==t.ownerSVGElement,!o&&n?[n]:r?null:t.firstChild?L.call(t.childNodes):null,a,!o&&n?n:r?r.__e:t.firstChild,o),S(a,e)}n.d(t,{HY:function(){return s},Vf:function(){return l},h:function(){return i},sY:function(){return P},wA:function(){return u}});var L,I,E,H,B,M,O,R={},F=[],N=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,V=Array.isArray;L=F.slice,I={__e:function(e,t,n,o){for(var r,i,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(e)),a=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,o||{}),a=r.__d),a)return r.__E=r}catch(t){e=t}throw e}},E=0,u.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=o({},this.state),"function"==typeof e&&(e=e(o({},n),this.props)),e&&o(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),c(this))},u.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),c(this))},u.prototype.render=s,H=[],M="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,O=function(e,t){return e.__v.__b-t.__v.__b},h.__r=0}},function(e){e(e.s=55)}]);